<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kingjo Maskulin</title>
  <style>
 /* Global Styles */
:root {
  --primary: #004d7f; /* Deep Blue */
  --primary-dark: #003c66; /* Very Dark Blue */
  --secondary: #f7f7f7; /* Light Gray */
  --accent: #2a6496; /* Medium Blue */
  --dark: #1a2c3b; /* Charcoal Blue */
  --light: #e5e5e5; /* Soft Gray */
  --success: #4caf50; /* Green */
  --text: #222222; /* Dark Text */
  --text-light: #757575; /* Lighter Text */
  --highlight: #ffb3b3; /* Light Red */
  --border-radius: 10px;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Arial', sans-serif;
  background-color: var(--light);
  color: var(--text);
  line-height: 1.6;
  margin: 0;
}

/* Header */
header {
  background: linear-gradient(45deg, var(--primary), var(--primary-dark));
  color: white;
  padding: 1rem 2rem;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 4px 15px rgba(0, 77, 127, 0.4);
}

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1300px;
  margin: 0 auto;
}

.navbar-right {
  display: flex;
  align-items: center;
}

.logo {
  font-size: 2rem;
  font-weight: 700;
  color: white;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.logo-img {
  width: 30px;
}

.search-bar {
  padding: 0.5rem;
  margin-right: 1rem;
  border: 1px solid var(--accent);
  border-radius: 25px;
  width: 200px;
}

.cart-btn {
  background: var(--secondary);
  color: var(--primary);
  border: 2px solid var(--primary);
  padding: 0.5rem 1rem;
  border-radius: 30px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: bold;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.cart-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
}

.cart-count {
  background: var(--primary);
  color: white;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
}

/* Main Content */
main {
  padding: 2rem 1rem;
}

.intro {
  text-align: center;
  margin-bottom: 2rem;
}

.intro h1 {
  font-size: 2.5rem;
  color: var(--dark);
}

.intro p {
  font-size: 1.2rem;
  color: var(--text-light);
}

.product-section {
  margin-top: 3rem;
}

.product-section h2 {
  font-size: 2rem;
  color: var(--dark);
  margin-bottom: 1.5rem;
}

.product-filters {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.filter-btn {
  background: var(--primary);
  color: white;
  padding: 0.5rem 1.5rem;
  border-radius: 30px;
  cursor: pointer;
  font-weight: bold;
  border: none;
  transition: background 0.3s;
}

.filter-btn:hover {
  background: var(--primary-dark);
}

/* Product Grid */
.product-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* Membuat 4 kolom per baris */
  gap: 2rem;
}

@media (max-width: 1200px) {
  .product-grid {
    grid-template-columns: repeat(3, 1fr); /* 3 kolom untuk ukuran layar lebih kecil */
  }
}

@media (max-width: 800px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr); /* 2 kolom untuk ukuran layar lebih kecil lagi */
  }
}

@media (max-width: 500px) {
  .product-grid {
    grid-template-columns: 1fr; /* 1 kolom untuk ukuran layar sangat kecil (misalnya ponsel) */
  }
}


.product-card {
  background: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 5px 20px rgba(0, 77, 127, 0.1);
  transition: all 0.3s ease;
  border: 3px solid var(--accent);
  position: relative;
}

.product-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 30px rgba(0, 77, 127, 0.2);
}

.product-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 5px;
  background: linear-gradient(90deg, #004d7f, #2a6496, #004d7f);
  background-size: 200% auto;
  animation: gradient 4s linear infinite;
}

.product-img-container {
  width: 100%;
  height: 220px;
  background: var(--secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  border-bottom: 2px solid var(--accent);
}

.product-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  padding: 1rem;
  transition: transform 0.3s ease;
}

.product-card:hover .product-img {
  transform: scale(1.08);
}

.product-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--primary);
  color: white;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: bold;
}

.product-content {
  padding: 1.5rem;
}

.product-title {
  font-size: 1.4rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: var(--dark);
}

.product-category {
  display: inline-block;
  background: var(--accent);
  color: white;
  padding: 0.3rem 1rem;
  border-radius: 15px;
  font-size: 0.85rem;
  margin-bottom: 1rem;
  font-weight: bold;
}

.product-price {
  color: var(--primary-dark);
  font-weight: bold;
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.product-stock {
  font-size: 1rem;
  color: var(--text-light);
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.product-stock::before {
  content: "🔷";
}

.product-detail {
  font-size: 1rem;
  color: var(--text-light);
  margin-bottom: 1.8rem;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.product-actions {
  display: flex;
  gap: 1rem;
}

.btn {
  padding: 0.8rem 1.2rem;
  border: none;
  border-radius: 25px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s;
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-dark);
  transform: translateY(-3px);
}

.btn-outline {
  background: transparent;
  border: 2px solid var(--primary);
  color: var(--primary);
}

.btn-outline:hover {
  background: var(--secondary);
  transform: translateY(-3px);
}

/* Testimonial Section */
.testimonial-section {
  margin-top: 4rem;
  background: var(--light);
  padding: 2rem;
  border-radius: var(--border-radius);
}

.testimonial-container {
  display: flex;
  gap: 2rem;
  justify-content: center;
}

.testimonial-card {
  background: var(--secondary);
  padding: 1.5rem;
  border-radius: var(--border-radius);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  width: 250px;
  text-align: center;
}

.testimonial-card p {
  font-style: italic;
  color: var(--text-light);
}

.testimonial-card span {
  display: block;
  margin-top: 1rem;
  font-weight: bold;
  color: var(--primary);
}

/* Featured Product Section */
.featured-product {
  margin-top: 4rem;
  text-align: center;
}

.featured-product-container {
  display: flex;
  justify-content: center;
  gap: 2rem;
}

.featured-product-card {
  background: var(--secondary);
  width: 300px;
  padding: 2rem;
  border-radius: var(--border-radius);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.featured-product-img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: var(--border-radius);
  margin-bottom: 1rem;
}

.featured-product-info {
  text-align: center;
}

.featured-product-title {
  font-size: 1.8rem;
  font-weight: bold;
  color: var(--dark);
}

.featured-product-description {
  color: var(--text-light);
  margin-bottom: 1rem;
}

.featured-product-info button {
  background: var(--primary);
  color: white;
  padding: 0.7rem 1.5rem;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.featured-product-info button:hover {
  background: var(--primary-dark);
}

/* Footer */
footer {
  background: var(--dark);
  color: var(--light);
  padding: 2rem;
  text-align: center;
}

.social-links {
  margin-top: 1rem;
}

.social-link {
  color: var(--light);
  margin: 0 1rem;
  font-size: 1.5rem;
  text-decoration: none;
}

.social-link:hover {
  color: var(--primary);
}
/* Cart Sidebar */
.cart-overlay {
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  z-index: 1000;
  display: none;
  transition: all 0.3s ease;
}

.cart-sidebar {
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  max-width: 450px;
  height: 100%;
  background: white;
  box-shadow: -6px 0 20px rgba(0, 77, 127, 0.3);
  transform: translateX(100%);
  transition: transform 0.3s ease;
  display: flex;
  flex-direction: column;
  z-index: 1001;
  border-left: 6px solid var(--primary);
}

.cart-sidebar.active {
  transform: translateX(0);
}

.cart-header {
  padding: 1.6rem;
  border-bottom: 2px solid var(--accent);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--secondary);
}

.cart-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--dark);
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.cart-title::before {
  content: "🛒";
}

.close-cart {
  background: none;
  border: none;
  font-size: 1.8rem;
  cursor: pointer;
  color: var(--primary);
  transition: transform 0.3s;
}

.close-cart:hover {
  transform: rotate(90deg);
}

.cart-items {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
  background: var(--light);
}

.cart-item {
  display: flex;
  gap: 1.3rem;
  padding: 1.3rem;
  border-bottom: 2px dashed var(--accent);
  background: white;
  border-radius: 12px;
  margin-bottom: 0.7rem;
  box-shadow: 0 2px 6px rgba(0, 77, 127, 0.1);
}

.cart-item-img {
  width: 90px;
  height: 90px;
  object-fit: contain;
  background: var(--secondary);
  border-radius: 12px;
  padding: 0.6rem;
  border: 2px solid var(--accent);
}

.cart-item-details {
  flex: 1;
}

.cart-item-title {
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: var(--dark);
}

.cart-item-price {
  color: var(--primary-dark);
  font-weight: bold;
  margin-bottom: 0.5rem;
}

.cart-item-actions {
  display: flex;
  align-items: center;
  gap: 0.7rem;
}

.remove-item {
  background: none;
  border: none;
  color: #ff4747;
  cursor: pointer;
  margin-left: auto;
  font-size: 1.4rem;
  transition: transform 0.3s;
}

.remove-item:hover {
  transform: scale(1.3);
}

.cart-footer {
  padding: 1.8rem;
  border-top: 2px solid var(--accent);
  background: var(--secondary);
}

.cart-total {
  display: flex;
  justify-content: space-between;
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 2rem;
  color: var(--dark);
}

.cart-subtotal {
  display: flex;
  justify-content: space-between;
  font-size: 1.3rem;
  color: var(--text-light);
  margin-bottom: 1rem;
}

.cart-discount {
  display: flex;
  justify-content: space-between;
  font-size: 1.3rem;
  color: var(--text-light);
  margin-bottom: 1rem;
}

.cart-total-final {
  display: flex;
  justify-content: space-between;
  font-size: 1.7rem;
  font-weight: bold;
  color: var(--dark);
  margin-bottom: 1.5rem;
}

.checkout-btn {
  width: 100%;
  padding: 1.3rem;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 1.3rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 12px rgba(0, 77, 127, 0.3);
}

.checkout-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-3px);
  box-shadow: 0 6px 15px rgba(0, 77, 127, 0.4);
}

/* Loading and Error States */
.loading, .error-message {
  text-align: center;
  padding: 3rem;
  grid-column: 1/-1;
}

.loading {
  color: var(--text-light);
  font-size: 1.5rem;
}

.error-message {
  color: #ff4747;
  font-size: 1.5rem;
}

.retry-btn {
  margin-top: 1.5rem;
  padding: 0.9rem 1.5rem;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 25px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s;
}

.retry-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-3px);
}

/* Animations */
@keyframes gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-12px); }
  100% { transform: translateY(0px); }
}

/* Testimonial Section */
.testimonial-section {
  margin-top: 4rem;
  background: var(--light);
  padding: 2rem;
  border-radius: var(--border-radius);
  text-align: center; /* Memusatkan teks di dalam testimonial */
}

.testimonial-container {
  display: flex;
  gap: 2rem;
  justify-content: center; /* Memusatkan kontainer testimonial secara horizontal */
  flex-wrap: wrap; /* Agar testimonial bisa pindah baris jika terlalu sempit */
}

.testimonial-card {
  background: var(--secondary);
  padding: 1.5rem;
  border-radius: var(--border-radius);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  width: 250px;
  text-align: center; /* Memusatkan teks dalam setiap kartu */
}

.testimonial-card p {
  font-style: italic;
  color: var(--text-light);
}

.testimonial-card span {
  display: block;
  margin-top: 1rem;
  font-weight: bold;
  color: var(--primary);
}


  </style>
</head>
<body>

 <!-- Header -->
<header>
  <div class="navbar">
    <a href="#" class="logo">
      <img src="../img/logoku.png" alt="ZaaShop Logo" class="logo-img" />
      Kingjo Maskulin
    </a>
    <div class="navbar-right">
      <input type="text" placeholder="Cari produk..." class="search-bar" />
      <button class="cart-btn" id="cartBtn">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </div>
  <div class="navbar-divider"></div>
</header>

<!-- Main Content -->
<main>
  <section class="intro">
    <h1>Selamat datang di Kingjo Maskulin</h1>
    <p>Temukan produk terbaik dengan harga terbaik</p>
  </section>
  
  <section class="product-section">
    <h2>Produk Terbaru</h2>
    <div class="product-filters">
      <button class="filter-btn" id="filterCategory">Kategori</button>
      <button class="filter-btn" id="filterPrice">Harga</button>
      <button class="filter-btn" id="filterDiscount">Diskon</button>
    </div>
    <div class="product-grid" id="productList">
      <div class="loading">
        Memuat produk... <span style="display: inline-block; animation: float 2s ease-in-out infinite;"></span>
      </div>
      <!-- Product Cards -->
      <div class="product-card" data-category="fashion">
        <div class="product-img-container">
          <img src="../img/produk1.jpg" alt="Produk 1" class="product-img"/>
        </div>
        <div class="product-content">
          <h3 class="product-title">Kaos Kingjo</h3>
          <p class="product-category">Fashion</p>
          <p class="product-price">Rp 250.000</p>
          <p class="product-stock">Stok: Tersedia</p>
          <button class="btn btn-primary">Beli Sekarang</button>
        </div>
      </div>
      <div class="product-card" data-category="accessories">
        <div class="product-img-container">
          <img src="../img/produk2.jpg" alt="Produk 2" class="product-img"/>
        </div>
        <div class="product-content">
          <h3 class="product-title">Jam Tangan Kingjo</h3>
          <p class="product-category">Aksesoris</p>
          <p class="product-price">Rp 450.000</p>
          <p class="product-stock">Stok: Tersedia</p>
          <button class="btn btn-primary">Beli Sekarang</button>
        </div>
      </div>
      <!-- More Product Cards -->
    </div>
  </section>

  <!-- Testimonial Section -->
  <section class="testimonial-section">
    <h2>Testimoni Pelanggan</h2>
    <div class="testimonial-container">
      <div class="testimonial-card">
        <p>"Produk Kingjo sangat nyaman dan berkualitas tinggi! Saya sangat puas dengan pembelian saya."</p>
        <p>- Andi, Jakarta</p>
      </div>
      <div class="testimonial-card">
        <p>"Pengiriman cepat dan produk sesuai dengan deskripsi. Kingjo memang pilihan tepat!"</p>
        <p>- Sari, Surabaya</p>
      </div>
      <div class="testimonial-card">
        <p>"Toko ini memberikan pelayanan yang sangat baik, dan produknya sangat stylish!"</p>
        <p>- Budi, Bali</p>
      </div>
    </div>
  </section>

<!-- Cart Sidebar -->
<div class="cart-overlay" id="cartOverlay"></div>
<div class="cart-sidebar" id="cartSidebar">
  <div class="cart-header">
    <h2 class="cart-title">Keranjang Belanja</h2>
    <button class="close-cart" id="closeCart">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="cart-items" id="cartItems">
    <!-- Cart items will be dynamically added here -->
    <div class="empty-cart">
      <p>Keranjang Anda kosong. Tambahkan beberapa produk!</p>
    </div>
  </div>
  <div class="cart-footer">
    <div class="cart-total">
      <span>Total Barang:</span>
      <span id="cartItemCount">0</span>
    </div>
    <div class="cart-subtotal">
      <span>Subtotal:</span>
      <span id="cartSubtotal">Rp 0</span>
    </div>
    <div class="cart-discount">
      <span>Diskon:</span>
      <span id="cartDiscount">Rp 0</span>
    </div>
    <div class="cart-total-final">
      <span>Total Pembayaran:</span>
      <span id="cartTotal">Rp 0</span>
    </div>
    <button class="checkout-btn" id="checkoutBtn">
      <i class="fab fa-whatsapp"></i> Pesan via WhatsApp
    </button>
  </div>
</div>

<!-- Footer -->
<footer>
  <div class="footer-content">
    <p>&copy; 2025 Kingjo Maskulin. All rights reserved.</p>
    <div class="social-links">
      <a href="#" class="social-link">
        <i class="fab fa-facebook"></i>
      </a>
      <a href="#" class="social-link">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="#" class="social-link">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="#" class="social-link">
        <i class="fab fa-youtube"></i>
      </a>
    </div>
  </div>
</footer>



  <script>
    // DOM Elements
    const productList = document.getElementById("productList");
    const cartBtn = document.getElementById("cartBtn");
    const cartCount = document.getElementById("cartCount");
    const cartOverlay = document.getElementById("cartOverlay");
    const cartSidebar = document.getElementById("cartSidebar");
    const closeCart = document.getElementById("closeCart");
    const cartItems = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");
    const checkoutBtn = document.getElementById("checkoutBtn");

    // State
    let products = [];
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // WhatsApp Configuration
    const WHATSAPP_NUMBER = "085893526744"; // Ganti dengan nomor WhatsApp Anda
    const COMPANY_NAME = "Kingjo Maskulin";

    // API Configuration
    const API_ENDPOINT = "https://crud-api-production-1baf.up.railway.app/api/products";

    // Dummy Data with kawaii products
    const dummyData = [
      {
        id: 1,
        nama_produk: "Bando Hello Kitty",
        kategori: "Aksesoris",
        harga: 45000,
        gambar: "https://via.placeholder.com/300x200.png/ff85a2/ffffff?text=Hello+Kitty",
        detail: "Bando lucu dengan hiasan Hello Kitty, cocok untuk sehari-hari",
        stok: 8
      },
      {
        id: 2,
        nama_produk: "Tas Ransel Strawberry",
        kategori: "Tas",
        harga: 120000,
        gambar: "https://via.placeholder.com/300x200.png/ffb6c1/ffffff?text=Tas+Strawberry",
        detail: "Tas ransel motif strawberry dengan hiasan pom-pom",
        stok: 5
      },
      {
        id: 3,
        nama_produk: "Notebook Sanrio",
        kategori: "Alat Tulis",
        harga: 35000,
        gambar: "https://via.placeholder.com/300x200.png/a8e6cf/ffffff?text=Notebook+Sanrio",
        detail: "Notebook bergambar karakter Sanrio dengan 100 halaman",
        stok: 12
      },
      {
        id: 4,
        nama_produk: "Gelang Pearl",
        kategori: "Aksesoris",
        harga: 25000,
        gambar: "https://via.placeholder.com/300x200.png/ffd3b6/ffffff?text=Gelang+Pearl",
        detail: "Gelang mutiara dengan charm berbentuk hati",
        stok: 3
      },
      {
        id: 5,
        nama_produk: "Sarung HP Pompompurin",
        kategori: "Aksesoris",
        harga: 55000,
        gambar: "https://via.placeholder.com/300x200.png/dcedc1/ffffff?text=Pompompurin",
        detail: "Case HP karakter Pompompurin dengan bahan silicone",
        stok: 7
      },
      {
        id: 6,
        nama_produk: "Stiker Decora",
        kategori: "Stiker",
        harga: 15000,
        gambar: "https://via.placeholder.com/300x200.png/ffaaa5/ffffff?text=Stiker+Decora",
        detail: "Paket stiker decora berbagai motif dan ukuran",
        stok: 20
      }
    ];

    // Format Rupiah
    function formatRupiah(angka) {
      return new Intl.NumberFormat('id-ID', {
        style: 'currency',
        currency: 'IDR',
        minimumFractionDigits: 0
      }).format(angka);
    }

    // Generate WhatsApp message
    function generateWhatsAppMessage() {
      let message = `Halo ${COMPANY_NAME}, saya ingin memesan:\n\n`;
      
      cart.forEach(item => {
        message += `➡ ${item.nama_produk}\n`;
        message += `   Jumlah: ${item.quantity}\n`;
        message += `   Harga: ${formatRupiah(item.harga)}\n`;
        message += `   Subtotal: ${formatRupiah(item.harga * item.quantity)}\n\n`;
      });
      
      message += `Total Pesanan: ${cartTotal.textContent}\n\n`;
      message += `Apakah produk masih tersedia?`;
      
      return encodeURIComponent(message);
    }

    // Open WhatsApp
    function openWhatsApp() {
      if (cart.length === 0) {
        showErrorNotification('Keranjang belanja kosong!');
        return;
      }
      
      const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${generateWhatsAppMessage()}`;
      window.open(whatsappUrl, '_blank');
      
      // Kosongkan keranjang setelah pesan dikirim
      cart = [];
      saveCart();
      closeCartSidebar();
    }

    // Buy Now function (direct to WhatsApp for single product)
    function buyNow(e) {
      const productCard = e.target.closest('.product-card');
      const productId = parseInt(productCard.dataset.id);
      const product = products.find(p => p.id === productId);
      
      if (!product) return;
      
      const message = `Halo ${COMPANY_NAME}, saya ingin membeli:\n\n` +
                     `➡ ${product.nama_produk}\n` +
                     `   Harga: ${formatRupiah(product.harga)}\n\n` +
                     `Apakah produk masih tersedia?`;
      
      const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, '_blank');
    }

    // Fetch Products
    async function loadProducts() {
      try {
        productList.innerHTML = '<div class="loading">Memuat produk... <span style="display: inline-block; animation: float 2s ease-in-out infinite;"></span></div>';
        
        // Try to fetch from API first
        let data;
        try {
          const response = await fetch(API_ENDPOINT);
          if (response.ok) {
            data = await response.json();
          } else {
            throw new Error("API response not OK");
          }
        } catch (error) {
          console.log("Gagal mengambil data dari API, menggunakan data dummy");
          data = dummyData;
        }
        
        console.log('Data produk:', data);
        
        if (!data || data.length === 0) {
          throw new Error("Tidak ada produk tersedia");
        }

        products = data;
        renderProducts();
        updateCartCount();
        
      } catch (error) {
        console.error("Error:", error);
        showError(`Gagal memuat produk. ${error.message}`);
      }
    }

    // Render Products
    function renderProducts() {
      if (products.length === 0) {
        productList.innerHTML = '<div class="loading">Tidak ada produk tersedia <span style="display: inline-block; animation: float 2s ease-in-out infinite;">😢</span></div>';
        return;
      }

      productList.innerHTML = products.map(product => `
        <div class="product-card" data-id="${product.id}">
          <div class="product-img-container">
            <img src="${product.gambar || 'https://via.placeholder.com/300x200.png/ff85a2/ffffff?text=Produk+ZaaShop'}" 
                 alt="${product.nama_produk}"
                 class="product-img"
                 onerror="this.src='https://via.placeholder.com/300x200.png/ff85a2/ffffff?text=Gambar+Error'">
            ${product.stok <= 3 ? '<span class="product-badge">Hampir Habis!</span>' : ''}
          </div>
          <div class="product-content">
            <h3 class="product-title">${product.nama_produk || 'Produk '}</h3>
            <span class="product-category">${product.kategori || 'Umum'}</span>
            <div class="product-price">${formatRupiah(product.harga || 0)}</div>
            <div class="product-stock">Stok: ${product.stok || 0}</div>
            <p class="product-detail">${product.detail || '!'}</p>
            <div class="product-actions">
              <button class="btn btn-outline add-to-cart">
                <i class="fas fa-cart-plus"></i> Keranjang
              </button>
              <button class="btn btn-primary buy-now">
                <i class="fab fa-whatsapp"></i> Beli Sekarang
              </button>
            </div>
          </div>
        </div>
      `).join('');

      // Add event listeners to buttons
      document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', addToCart);
      });

      document.querySelectorAll('.buy-now').forEach(button => {
        button.addEventListener('click', buyNow);
      });
    }

    // Cart Functions
    function addToCart(e) {
      const productCard = e.target.closest('.product-card');
      const productId = parseInt(productCard.dataset.id);
      const product = products.find(p => p.id === productId);
      
      if (!product) return;
      
      // Check if product already in cart
      const existingItem = cart.find(item => item.id === productId);
      
      if (existingItem) {
        // Check stock
        if (existingItem.quantity >= product.stok) {
          showErrorNotification('Stok tidak cukup');
          return;
        }
        existingItem.quantity += 1;
      } else {
        cart.push({
          ...product,
          quantity: 1
        });
      }
      
      saveCart();
      updateCartCount();
      showSuccessNotification(`${product.nama_produk} mantap masuk keranjang`);
    }

    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCartItems();
    }

    function updateCartCount() {
      const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
      cartCount.textContent = totalItems;
      
      // Add animation when cart updates
      if (totalItems > 0) {
        cartCount.style.transform = 'scale(1.3)';
        setTimeout(() => {
          cartCount.style.transform = 'scale(1)';
        }, 300);
      }
    }

    function renderCartItems() {
      if (cart.length === 0) {
        cartItems.innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">🛒</div>
            <p>Keranjang belanja kosong</p>
            <p style="color: var(--text-light); margin-top: 0.5rem;">Ayo belanja produk ZaaShop!</p>
          </div>
        `;
        cartTotal.textContent = formatRupiah(0);
        return;
      }

      cartItems.innerHTML = cart.map(item => `
        <div class="cart-item" data-id="${item.id}">
          <img src="${item.gambar || 'https://via.placeholder.com/100x100.png/ff85a2/ffffff?text=Produk'}" 
               alt="${item.nama_produk}"
               class="cart-item-img"
               onerror="this.src='https://via.placeholder.com/100x100.png/ff85a2/ffffff?text=Gambar+Error'">
          <div class="cart-item-details">
            <h4 class="cart-item-title">${item.nama_produk}</h4>
            <div class="cart-item-price">${formatRupiah(item.harga)}</div>
            <div class="cart-item-actions">
              <div class="quantity-control">
                <button class="quantity-btn decrease">-</button>
                <input type="number" class="quantity-input" value="${item.quantity}" min="1" max="${item.stok}">
                <button class="quantity-btn increase">+</button>
              </div>
              <button class="remove-item">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      `).join('');

      // Calculate total
      const total = cart.reduce((sum, item) => sum + (item.harga * item.quantity), 0);
      cartTotal.textContent = formatRupiah(total);

      // Add event listeners
      document.querySelectorAll('.decrease').forEach(btn => {
        btn.addEventListener('click', decreaseQuantity);
      });

      document.querySelectorAll('.increase').forEach(btn => {
        btn.addEventListener('click', increaseQuantity);
      });

      document.querySelectorAll('.quantity-input').forEach(input => {
        input.addEventListener('change', updateQuantity);
      });

      document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', removeItem);
      });
    }

    function decreaseQuantity(e) {
      const cartItem = e.target.closest('.cart-item');
      const productId = parseInt(cartItem.dataset.id);
      const item = cart.find(item => item.id === productId);
      
      if (item.quantity > 1) {
        item.quantity -= 1;
        saveCart();
        showInfoNotification(`Jumlah ${item.nama_produk} dikurangi`);
      }
    }

    function increaseQuantity(e) {
      const cartItem = e.target.closest('.cart-item');
      const productId = parseInt(cartItem.dataset.id);
      const item = cart.find(item => item.id === productId);
      const product = products.find(p => p.id === productId);
      
      if (item.quantity < product.stok) {
        item.quantity += 1;
        saveCart();
        showInfoNotification(`Jumlah ${item.nama_produk} ditambah`);
      } else {
        showErrorNotification('Stok tidak mencukupi! 😢');
      }
    }

    function updateQuantity(e) {
      const cartItem = e.target.closest('.cart-item');
      const productId = parseInt(cartItem.dataset.id);
      const item = cart.find(item => item.id === productId);
      const product = products.find(p => p.id === productId);
      const newQuantity = parseInt(e.target.value);
      
      if (newQuantity >= 1 && newQuantity <= product.stok) {
        item.quantity = newQuantity;
        saveCart();
      } else {
        e.target.value = item.quantity;
        showErrorNotification('Stok tidak mencukupi! 😢');
      }
    }

    function removeItem(e) {
      const cartItem = e.target.closest('.cart-item');
      const productId = parseInt(cartItem.dataset.id);
      const item = cart.find(item => item.id === productId);
      
      cart = cart.filter(item => item.id !== productId);
      saveCart();
      showInfoNotification(`${item.nama_produk} dihapus dari keranjang`);
    }

    // Cart UI
    function openCart() {
      cartOverlay.style.display = 'block';
      cartSidebar.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeCartSidebar() {
      cartOverlay.style.display = 'none';
      cartSidebar.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    // Notification functions
    function showSuccessNotification(message) {
      showNotification(message, '#a8e6cf', '✅');
    }
    
    function showErrorNotification(message) {
      showNotification(message, '#ffaaa5', '❌');
    }
    
    function showInfoNotification(message) {
      showNotification(message, '#dcedc1', 'ℹ️');
    }
    
    function showNotification(message, bgColor, icon) {
      const notification = document.createElement('div');
      notification.style.position = 'fixed';
      notification.style.bottom = '20px';
      notification.style.left = '50%';
      notification.style.transform = 'translateX(-50%)';
      notification.style.backgroundColor = bgColor;
      notification.style.color = '#5a3d4a';
      notification.style.padding = '12px 24px';
      notification.style.borderRadius = '15px';
      notification.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
      notification.style.zIndex = '1000';
      notification.style.animation = 'slideIn 0.3s, fadeOut 0.5s 2.5s forwards';
      notification.style.display = 'flex';
      notification.style.alignItems = 'center';
      notification.style.gap = '0.5rem';
      notification.style.fontWeight = 'bold';
      notification.innerHTML = `${icon} ${message}`;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // Error Handling
    function showError(message) {
      productList.innerHTML = `
        <div class="error-message">
          <i class="fas fa-exclamation-triangle"></i>
          <p>${message}</p>
          <button class="retry-btn" onclick="loadProducts()">
            <i class="fas fa-sync-alt"></i> Coba Lagi
          </button>
        </div>
      `;
    }

    // Event Listeners
    cartBtn.addEventListener('click', openCart);
    cartOverlay.addEventListener('click', closeCartSidebar);
    closeCart.addEventListener('click', closeCartSidebar);
    checkoutBtn.addEventListener('click', openWhatsApp);

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadProducts();
      renderCartItems();
    });
  </script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</body>
</html>